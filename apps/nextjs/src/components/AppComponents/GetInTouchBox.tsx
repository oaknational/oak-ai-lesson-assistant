import { useEffect, useState } from "react";

const GetInTouchBox = () => {
  const [isFirstRender, setIsFirstRender] = useState(true);
  useEffect(() => {
    if (isFirstRender) {
      setIsFirstRender(false);
    }
  }, [isFirstRender]);

  // Cloudflare has a script to obfuscate emails in the rendered page
  // Our CSP policy is blocking it from activating, so we can simulate it ourselves
  const email = isFirstRender
    ? "/cdn-cgi/l/email-protection"
    : "mailto:help@thenational.academy";

  return (
    <div className="flex flex-col items-center gap-14 rounded bg-lavender30 p-19 sm:flex-row">
      <div>
        <svg
          width="36"
          height="37"
          viewBox="0 0 36 37"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_305_1179)">
            <path
              d="M14.4808 0C14.9282 0 15.2664 0.26405 15.3865 0.748141C15.5829 1.55129 15.7575 2.35444 15.9648 3.1576C16.3686 4.71989 16.8487 6.26018 17.569 7.71246C18.5074 9.58281 19.926 10.9471 21.8684 11.7612C23.8109 12.5754 25.8187 13.1255 27.8594 13.5766C28.034 13.6096 28.1976 13.6536 28.3613 13.7086C28.7323 13.8406 28.9724 14.1707 28.9833 14.5778C28.9942 14.9408 28.776 15.3039 28.4159 15.4359C27.903 15.623 27.3574 15.689 26.8336 15.821C24.8148 16.3161 22.8178 16.8772 20.9736 17.8784C19.5114 18.6705 18.4201 19.8258 17.6563 21.311C16.7287 23.1154 16.2049 25.0517 15.7357 27.0101C15.6266 27.4832 15.5174 27.9563 15.3974 28.4294C15.2664 28.9245 14.9282 29.2105 14.4808 29.2105C14.0443 29.2105 13.6951 28.9135 13.575 28.4074C13.2586 26.9991 12.9421 25.6018 12.5056 24.2266C12.1782 23.2034 11.7963 22.2022 11.2943 21.256C10.3013 19.3637 8.76266 18.1204 6.83116 17.3063C4.92149 16.4921 2.92452 16.008 0.916641 15.5349C0.829342 15.5129 0.731131 15.4909 0.643831 15.4579C0.261898 15.3479 0 14.9958 0 14.6218C0 14.2477 0.240073 13.8626 0.622007 13.7526C1.1458 13.5986 1.68051 13.4886 2.2043 13.3565C4.11397 12.8834 5.99091 12.3223 7.76963 11.4422C9.42831 10.617 10.6287 9.34077 11.4471 7.69045C12.1346 6.29319 12.582 4.79691 12.9639 3.27862C13.1713 2.46447 13.3786 1.65031 13.5532 0.825156C13.6841 0.26405 13.9897 0 14.4808 0ZM14.5135 24.4466C14.5353 24.3806 14.5571 24.3366 14.5681 24.2926C14.8954 23.0054 15.3974 21.7951 15.9648 20.5959C16.7505 18.9456 17.8963 17.6473 19.4241 16.6682C20.7117 15.843 22.1194 15.2929 23.5708 14.8418C23.789 14.7758 24.0073 14.6988 24.291 14.6108C24.1491 14.5558 24.0837 14.5337 24.0073 14.5117C23.047 14.2257 22.0976 13.8956 21.181 13.4996C19.3586 12.7184 17.809 11.5632 16.6851 9.89087C15.943 8.79066 15.452 7.56943 15.0155 6.3262C14.8409 5.8311 14.6881 5.32501 14.5135 4.81891C14.4262 4.87392 14.4153 4.96194 14.3935 5.02795C14.0879 6.05114 13.7278 7.05233 13.3131 8.03152C12.331 10.342 10.716 12.0583 8.47893 13.1585C7.35496 13.7086 6.19824 14.1597 4.99788 14.5117C4.9324 14.5337 4.83419 14.5227 4.80146 14.6218C6.05638 15.0178 7.30039 15.4689 8.47893 16.063C10.1485 16.8992 11.5453 18.0544 12.5056 19.6827C13.2586 20.97 13.8587 22.3232 14.2625 23.7645C14.328 23.9955 14.3825 24.2156 14.5135 24.4466Z"
              fill="#222222"
            />
            <path
              d="M19.2059 28.5504C19.2059 28.0773 19.4896 27.7363 20.0243 27.6152C20.6572 27.4612 21.2792 27.3182 21.9012 27.1311C22.4905 26.9551 23.047 26.7351 23.6036 26.482C24.6621 25.9869 25.3059 25.1068 25.7533 24.0726C26.1898 23.0824 26.408 22.0372 26.6481 20.992C26.6481 20.959 26.659 20.926 26.6699 20.893C26.8009 20.3759 27.1283 20.0678 27.5538 20.0678C28.0122 20.0678 28.3723 20.3649 28.5032 20.882C28.7215 21.7731 28.907 22.6643 29.2125 23.5225C29.4199 24.1056 29.7036 24.6557 30.0419 25.1728C30.6421 26.0639 31.5369 26.537 32.519 26.8891C33.3374 27.1862 34.1886 27.3512 35.0288 27.5602C35.138 27.5822 35.2471 27.6152 35.3453 27.6482C35.7381 27.7913 35.9782 28.1103 35.9891 28.5064C35.9891 28.8805 35.76 29.2655 35.378 29.3866C34.8433 29.5516 34.2977 29.6726 33.7521 29.8157C33.0428 30.0137 32.3444 30.2337 31.6787 30.5418C30.5984 31.0369 29.8891 31.873 29.4526 32.9622C29.0707 33.9414 28.8088 34.9536 28.5578 35.9768C28.525 36.0978 28.4923 36.2189 28.4596 36.3399C28.3286 36.736 28.0122 36.978 27.6084 36.989C27.2374 37 26.8991 36.78 26.7463 36.3949C26.6045 36.0318 26.5499 35.6358 26.4626 35.2617C26.288 34.5906 26.1134 33.9194 25.8733 33.2703C25.3059 31.719 24.2365 30.6958 22.6869 30.1787C21.8139 29.8817 20.93 29.6616 20.0352 29.4526C19.4896 29.3316 19.1949 28.9905 19.1949 28.5394L19.2059 28.5504ZM23.5381 28.5284C25.4914 29.2766 26.8991 30.5638 27.5975 32.5992C28.3068 30.5748 29.6599 29.2325 31.6569 28.5394C30.6966 28.1763 29.8345 27.7253 29.1361 26.9991C28.4377 26.273 27.9903 25.3928 27.5757 24.3916C26.9209 26.515 25.535 27.8243 23.5381 28.5394V28.5284Z"
              fill="#222222"
            />
          </g>
          <defs>
            <clipPath id="clip0_305_1179">
              <rect width="36" height="37" fill="white" />
            </clipPath>
          </defs>
        </svg>
      </div>
      <p>
        {"Can’t find what you need? "}
        <a href={email} className="text-blue underline">
          Get in touch
        </a>
        {", we’d be happy to help."}
      </p>
    </div>
  );
};

export default GetInTouchBox;
